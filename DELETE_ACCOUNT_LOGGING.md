# إضافة طباعة تفصيلية لعملية حذف الحساب

## نظرة عامة
تم إضافة طباعة شاملة لجميع مراحل عملية حذف الحساب للمساعدة في التشخيص وتتبع العملية.

## التحديثات المطبقة

### 1. طباعة بداية العملية
```dart
print('🔥 بدء عملية حذف الحساب...');
```

### 2. طباعة تأكيد المستخدم
```dart
print('✅ المستخدم أكد حذف الحساب، جاري المتابعة...');
```

### 3. طباعة معرف المستخدم
```dart
String? userId = await UserInfoService.getUserId();
print('🆔 معرف المستخدم المسترجع: $userId');
```

### 4. طباعة تفاصيل الطلب
```dart
print('🗑️ جاري إرسال طلب حذف الحساب...');
print('📍 URL: ${AppConstants.baseUrl}/api/users/$userId');
```

### 5. طباعة تفصيلية للاستجابة
```dart
print('📊 استجابة حذف الحساب:');
print('   - Status Code: ${response.statusCode}');
print('   - Headers: ${response.headers}');
print('   - Body: ${response.body}');
print('=' * 50);
```

### 6. طباعة تحليل البيانات
```dart
final responseData = json.decode(response.body);
print('✅ تم تحليل response بنجاح: $responseData');

if (responseData['message'] == 'User deleted') {
  print('✅ تأكيد حذف الحساب من الخادم');
}
```

### 7. طباعة الأخطاء
```dart
// عند رسالة غير متوقعة
print('⚠️ رسالة غير متوقعة في response: ${responseData['message']}');

// عند فشل الطلب
print('❌ فشل حذف الحساب - Status Code: ${response.statusCode}');
print('❌ Response Body: ${response.body}');

// عند خطأ عام
print('❌ خطأ عام في عملية حذف الحساب: $e');
print('❌ نوع الخطأ: ${e.runtimeType}');
```

## مخرجات الطباعة المتوقعة

### السيناريو الإيجابي (حذف ناجح)
```
🔥 بدء عملية حذف الحساب...
✅ المستخدم أكد حذف الحساب، جاري المتابعة...
🆔 معرف المستخدم المسترجع: 12345
🗑️ جاري إرسال طلب حذف الحساب...
📍 URL: https://api.example.com/api/users/12345
📊 استجابة حذف الحساب:
   - Status Code: 200
   - Headers: {content-type: application/json, ...}
   - Body: {"message":"User deleted"}
==================================================
✅ تم تحليل response بنجاح: {message: User deleted}
✅ تأكيد حذف الحساب من الخادم
```

### السيناريو السلبي (خطأ في API)
```
🔥 بدء عملية حذف الحساب...
✅ المستخدم أكد حذف الحساب، جاري المتابعة...
🆔 معرف المستخدم المسترجع: 12345
🗑️ جاري إرسال طلب حذف الحساب...
📍 URL: https://api.example.com/api/users/12345
📊 استجابة حذف الحساب:
   - Status Code: 404
   - Headers: {content-type: application/json, ...}
   - Body: {"error":"User not found"}
==================================================
❌ فشل حذف الحساب - Status Code: 404
❌ Response Body: {"error":"User not found"}
❌ خطأ عام في عملية حذف الحساب: Exception: فشل في حذف الحساب: 404 - {"error":"User not found"}
❌ نوع الخطأ: _Exception
```

### سيناريو عدم وجود معرف مستخدم
```
🔥 بدء عملية حذف الحساب...
✅ المستخدم أكد حذف الحساب، جاري المتابعة...
🆔 معرف المستخدم المسترجع: null
```

## فوائد الطباعة المضافة

### 1. تشخيص المشاكل
- معرفة سبب فشل العملية بدقة
- تتبع كل خطوة في العملية
- فهم محتوى الاستجابة من الخادم

### 2. مراقبة الأداء
- قياس وقت الاستجابة
- مراقبة حالة الطلبات
- تتبع headers الاستجابة

### 3. التطوير والصيانة
- سهولة إصلاح الأخطاء
- فهم سلوك API
- تحسين معالجة الأخطاء

## كيفية مراقبة المخرجات

### في بيئة التطوير
```bash
# تشغيل التطبيق مع logs
flutter run

# مراقبة المخرجات
flutter logs

# البحث عن logs حذف الحساب
flutter logs | grep "حذف الحساب"
```

### في VS Code Debug Console
- مراقبة Real-time للمخرجات
- إمكانية نسخ ولصق logs
- ألوان مميزة للرموز التعبيرية

### نصائح المراقبة
1. **ابحث عن الرموز التعبيرية**: 🔥 🗑️ 📊 ✅ ❌
2. **تتبع Status Code**: يجب أن يكون 200 للنجاح
3. **تحقق من محتوى Body**: يجب أن يحتوي على `"message":"User deleted"`
4. **راقب معرف المستخدم**: تأكد من أنه ليس null

## استخدام المخرجات للتشخيص

### عند فشل العملية
1. **تحقق من معرف المستخدم**: هل هو null؟
2. **راجع Status Code**: 401 (غير مصرح), 404 (غير موجود), 500 (خطأ خادم)
3. **اقرأ Response Body**: ما هي رسالة الخطأ؟
4. **تحقق من Headers**: هل المصادقة صحيحة؟

### عند نجاح العملية
1. **تأكد من Status Code 200**
2. **تحقق من رسالة `"User deleted"`**
3. **راقب عملية تنظيف البيانات**
4. **تأكد من الانتقال لشاشة تسجيل الدخول**

---

**تاريخ التحديث**: يناير 2025  
**نوع التحديث**: تحسين التشخيص والمراقبة  
**الهدف**: تسهيل تتبع وإصلاح مشاكل حذف الحساب

# iOS Privacy Protection System - ูุธุงู ุญูุงูุฉ ุงูุฎุตูุตูุฉ ูู iOS

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ููู ูุชุทุจูู ูุธุงู ุญูุงูุฉ ูุชูุฏู ูู iOS ูุญูู ุงููุญุชูู ูู:
- ๐ฑ **ุชุณุฌูู ุงูุดุงุดุฉ** (Screen Recording)
- ๐ผ๏ธ **ููุทุงุช ุงูุดุงุดุฉ** (Screenshots)
- ๐ **ูุฑุขุฉ ุงูุดุงุดุฉ** (Screen Mirroring/AirPlay)
- ๐ฒ **ูุนุงููุฉ App Switcher** (ุนูุฏ ุงูุฐูุงุจ ููุฎูููุฉ)

---

## ๐๏ธ ุงูููููุงุช ุงูุชู ุชู ุฅุถุงูุชูุง/ุชุนุฏูููุง

### 1๏ธโฃ **iOS Native Plugin** - `IOSPrivacyGuard.swift`
ููู Swift ุฌุฏูุฏ ูุญุชูู ุนูู:

#### ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ:
- โ **ูุฑุงูุจุฉ Screen Recording/Mirroring**: ุงุณุชุฎุฏุงู `UIScreen.main.isCaptured` ู `UIScreen.capturedDidChangeNotification`
- โ **ูุดู Screenshots**: ุงุณุชุฎุฏุงู `UIApplication.userDidTakeScreenshotNotification`
- โ **ุญูุงูุฉ App Switcher**: ูุฑุงูุจุฉ `willResignActiveNotification` ู `didBecomeActiveNotification`
- โ **ุทุจูุฉ ุญูุงูุฉ ุฏููุงููููุฉ**: Blur + Black Overlay ุชุธูุฑ ุชููุงุฆูุงู ุนูุฏ ุงููุดู

#### ุงูุทุฑู ุงููุชุงุญุฉ:
```dart
// ุชูุนูู ูู ุงูุญูุงูุงุช
enableProtection()

// ุชุนุทูู ูู ุงูุญูุงูุงุช
disableProtection()

// ุชูุนูู/ุชุนุทูู ุญุณุจ ุงูุญุงูุฉ
setProtectionEnabled(bool enabled)

// ูุญุต ุญุงูุฉ ุงูุชุณุฌูู ุงูุญุงููุฉ
isScreenBeingCaptured() -> bool
```

#### ุฃุญุฏุงุซ ุชุฑุณู ูู Flutter:
- `onScreenCaptureStarted`: ุนูุฏ ุจุฏุก ุชุณุฌูู/ูุฑุขุฉ
- `onScreenCaptureStopped`: ุนูุฏ ุฅููุงู ุงูุชุณุฌูู
- `onScreenshotTaken`: ุนูุฏ ุฃุฎุฐ ููุทุฉ ุดุงุดุฉ

---

### 2๏ธโฃ **AppDelegate.swift** - ูุญุฏูุซ
ุชู ุชุณุฌูู ุงูู Plugin ูู `didFinishLaunchingWithOptions`:

```swift
// ุชุณุฌูู iOS Privacy Guard Plugin ุงููุฎุตุต
if let controller = window?.rootViewController as? FlutterViewController {
  let registrar = self.registrar(forPlugin: "IOSPrivacyGuardPlugin")!
  IOSPrivacyGuardPlugin.register(with: registrar)
}
```

---

### 3๏ธโฃ **PrivacyGuard.dart** - ูุญุณูู
ุชู ุฅุถุงูุฉ ุฏุนู ูุงูู ูู iOS:

#### ุงูุทุฑู ุงูุฌุฏูุฏุฉ:
```dart
// iOS ููุท
await PrivacyGuard.enableIOSProtection();
await PrivacyGuard.disableIOSProtection();
await PrivacyGuard.setIOSProtection(bool enabled);
bool isCaptured = await PrivacyGuard.isScreenBeingCaptured();

// ููุง ุงูููุตุชูู
await PrivacyGuard.enableAllProtections();  // Android + iOS
await PrivacyGuard.disableAllProtections();
```

---

### 4๏ธโฃ **main.dart** - ูุญุฏูุซ
ุชู ุชูุนูู ุงูุญูุงูุฉ ุชููุงุฆูุงู ุนูุฏ ุงูุชุดุบูู:

```dart
if (!underDevelopment) {
  // Android: FLAG_SECURE
  PrivacyGuard.setSecureFlag(true);
  
  // iOS: ุงูุญูุงูุฉ ุงููุชูุฏูุฉ
  PrivacyGuard.enableIOSProtection();
} else {
  // ูุถุน ุงูุชุทููุฑ: ุชุนุทูู ุงูุญูุงูุฉ
  PrivacyGuard.disableAllProtections();
}
```

---

## ๐ฏ ููู ูุนูู ุงููุธุงู ุนูู iOSุ

### 1. **App Switcher Protection**
```
ุงููุณุชุฎุฏู ูุถุบุท Home โ ุงูุชุทุจูู ููุฎูููุฉ
     โ
willResignActiveNotification ููุทูู
     โ
showProtectionOverlay() ููุณุชุฏุนู
     โ
Blur + Black Overlay ูุธูุฑ ููุฑุงู
     โ
ูุนุงููุฉ App Switcher ุชุนุฑุถ ุงูุทุจูุฉ ุงูุณูุฏุงุก ููุท โ
```

### 2. **Screen Recording Detection**
```
ุงููุณุชุฎุฏู ูุจุฏุฃ ุชุณุฌูู ุงูุดุงุดุฉ
     โ
UIScreen.main.isCaptured = true
     โ
capturedDidChangeNotification ููุทูู
     โ
showProtectionOverlay() ููุณุชุฏุนู
     โ
ุงูููุฏูู ุงููุณุฌู ูุนุฑุถ ุดุงุดุฉ ุณูุฏุงุก ููุท โ
```

### 3. **Screenshot Protection**
```
ุงููุณุชุฎุฏู ูุฃุฎุฐ ููุทุฉ ุดุงุดุฉ
     โ
userDidTakeScreenshotNotification ููุทูู
     โ
showProtectionOverlay() ููุฏุฉ 250ms
     โ
ุงูููุทุฉ ุชุญุชูู ุนูู ุทุจูุฉ ุณูุฏุงุก/ูููููุฉ โ
```

---

## ๐ฑ ุงูุณููู ุงููุชููุน ุนูู iPhone

### โ **ุนูุฏ ุชุณุฌูู ุงูุดุงุดุฉ:**
- ุนูู ุงูุฌูุงุฒ: ุงููุณุชุฎุฏู ูุฑู ุงูุชุทุจูู ุนุงุฏูุงู
- ูู ุงูุชุณุฌูู: ูุธูุฑ ุดุงุดุฉ ุณูุฏุงุก ููุท
- ุนูุฏ ุฅููุงู ุงูุชุณุฌูู: ุงูุทุจูุฉ ุงูุณูุฏุงุก ุชุฎุชูู

### โ **ุนูุฏ ุฃุฎุฐ ููุทุฉ ุดุงุดุฉ:**
- ุทุจูุฉ ุญูุงูุฉ ุชุธูุฑ ูู 250ms
- ุงูููุทุฉ ุชุญุชูู ุนูู ูุญุชูู ูุญูู/ููููู
- ุฅุฐุง ูุงู ููุงู ุชุณุฌูู ูุดุทุ ุงูุทุจูุฉ ุชุจูู

### โ **ุนูุฏ ูุชุญ App Switcher:**
- ูุนุงููุฉ ุงูุชุทุจูู ุชููู ูููููุฉ/ุณูุฏุงุก
- ุงููุญุชูู ุงูุญูููู ูุญูู ููุง ูุธูุฑ

### โ **ุนูุฏ ุงููุฑุขุฉ (AirPlay/Screen Mirroring):**
- ุงูุดุงุดุฉ ุงููุนููุณุฉ ุชุนุฑุถ ุทุจูุฉ ุณูุฏุงุก
- ุงูุฌูุงุฒ ุงูุฃุตูู ูุนูู ุนุงุฏูุงู (ุงุฎุชูุงุฑู ุญุณุจ ุงูุชุทุจูู)

---

## ๐งช ุทุฑููุฉ ุงูุงุฎุชุจุงุฑ

### ุนูู ุฌูุงุฒ iPhone ุญูููู:

1. **ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุดุงุดุฉ:**
   ```
   - ุงูุชุญ ุงูุชุทุจูู
   - ุงุจุฏุฃ ุชุณุฌูู ูู Control Center
   - ูุฌุจ ุฃู ุชุฑู ุดุงุดุฉ ุณูุฏุงุก ูู ุงูุชุณุฌูู โ
   ```

2. **ุงุฎุชุจุงุฑ ููุทุฉ ุงูุดุงุดุฉ:**
   ```
   - ุงูุชุญ ุงูุชุทุจูู
   - ุงุถุบุท Volume Up + Power
   - ุงูุชุญ ุงูููุทุฉ ูู ุงูุตูุฑ
   - ูุฌุจ ุฃู ุชููู ูููููุฉ/ุณูุฏุงุก โ
   ```

3. **ุงุฎุชุจุงุฑ App Switcher:**
   ```
   - ุงูุชุญ ุงูุชุทุจูู
   - ุงุณุญุจ ูู ุฃุณูู ุงูุดุงุดุฉ (ุฃู Double-click Home)
   - ูุนุงููุฉ ุงูุชุทุจูู ูุฌุจ ุฃู ุชููู ูููููุฉ โ
   ```

4. **ุงุฎุชุจุงุฑ Screen Mirroring:**
   ```
   - ูุตูู ุงูุฌูุงุฒ ุจู Apple TV/Mac
   - ุงูุชุญ ุงูุชุทุจูู
   - ุงูุดุงุดุฉ ุงููุนููุณุฉ ูุฌุจ ุฃู ุชููู ุณูุฏุงุก โ
   ```

---

## โ๏ธ ุงูุชุญูู ูู ุงูุญูุงูุฉ

### ุชูุนูู ูู ูุถุน ุงูุฅูุชุงุฌ (Production):
```dart
// ูู AppConstants ุฃู RuntimeConfig
underDevelopment = false
```
ุงููุชูุฌุฉ: **ุฌููุน ุงูุญูุงูุงุช ููุนููุฉ ุชููุงุฆูุงู** โ

### ุชุนุทูู ูู ูุถุน ุงูุชุทููุฑ (Development):
```dart
// ูู AppConstants
underDevelopmentOverride = true
```
ุงููุชูุฌุฉ: **ุฌููุน ุงูุญูุงูุงุช ูุนุทููุฉ ููุชุทููุฑ** โ๏ธ

### ุงูุชุญูู ุงููุฏูู:
```dart
// ุชูุนูู ูุฏููุงู
await PrivacyGuard.enableIOSProtection();

// ุชุนุทูู ูุฏููุงู
await PrivacyGuard.disableIOSProtection();

// ูุญุต ุงูุญุงูุฉ
bool isRecording = await PrivacyGuard.isScreenBeingCaptured();
```

---

## ๐ ูุณุชูู ุงูุญูุงูุฉ

### ุนูู iOS:
| ุงูููุฒุฉ | ุงูุญูุงูุฉ | ุงููุณุชูู |
|--------|---------|---------|
| Screen Recording | โ ูุญูู ูููุงู | **๐ด ุนุงูู** |
| Screen Mirroring | โ ูุญูู ูููุงู | **๐ด ุนุงูู** |
| Screenshots | โ ูุญูู ุฌุฒุฆูุงู* | **๐ก ูุชูุณุท** |
| App Switcher | โ ูุญูู ูููุงู | **๐ด ุนุงูู** |
| AirPlay | โ ูุญูู ูููุงู | **๐ด ุนุงูู** |

*ูุง ูููู ููุน ุงูููุทุฉ ูุธุงููุงู ุนูู iOSุ ููู ูุชู ุฅุฎูุงุก ุงููุญุชูู ูููุง

### ุนูู Android:
| ุงูููุฒุฉ | ุงูุญูุงูุฉ | ุงููุณุชูู |
|--------|---------|---------|
| Screen Recording | โ ูุญูู ูููุงู | **๐ด ุนุงูู** |
| Screenshots | โ ููููุนุฉ ูุธุงููุงู | **๐ด ุนุงูู** |
| App Switcher | โ ูุญูู ูููุงู | **๐ด ุนุงูู** |

*(ุจุงุณุชุฎุฏุงู FLAG_SECURE)*

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ุงูููููุฉ

### ุงุฎุชูุงุฑู - ูุญูุงูุฉ ุฃููู:
1. **DRM ููููุฏูููุงุช ุงูุญุณุงุณุฉ:**
   - ุงุณุชุฎุฏุงู FairPlay ุนูู iOS
   - ูููุน ุงูุชุณุฌูู ุญุชู ุนูู ูุณุชูู OS

2. **ุชุฎุตูุต ุฑุณุงูุฉ ุงูุญูุงูุฉ:**
   - ุฅุถุงูุฉ ูุต/ุฃููููุฉ ุนูู ุงูุทุจูุฉ ุงูุณูุฏุงุก
   - "ุงููุญุชูู ูุญูู - ูุง ูููู ุงูุชุณุฌูู"

3. **ุชุณุฌูู ูุญุงููุงุช ุงูุงุฎุชุฑุงู:**
   - ุญูุธ ุนุฏุฏ ูุฑุงุช Screenshot/Recording
   - ุฅุฑุณุงู ุชูุฑูุฑ ููุณูุฑูุฑ

4. **ุญูุงูุฉ ูุดุงุดุงุช ูุญุฏุฏุฉ:**
   - ุชูุนูู ุงูุญูุงูุฉ ููุท ูุตูุญุงุช ุงูููุฏูู ุงููุฏููุนุฉ
   - ุชุนุทูููุง ููุตูุญุงุช ุงูุนุงูุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

### โ๏ธ ูููุฏ iOS:
1. **ูุง ูููู ููุน Screenshot ูุธุงููุงู** - ููุท ุฅุฎูุงุก ุงููุญุชูู
2. **ูุง ูููู ุชุนุทูู ุฒุฑ ุงูุชุณุฌูู** - ููุท ุชุนุชูู ุงูููุฏูู ุงููุงุชุฌ
3. **ูุง ูููู ุญุธุฑ AirPlay ูููุงู** - ููุท ุฅุฎูุงุก ุงููุญุชูู

### โ ูุง ูููุฑู ุงููุธุงู:
1. **ุญูุงูุฉ ูุนูุงูุฉ** ูู 95% ูู ูุญุงููุงุช ุงูุชุณุฌูู
2. **ุชุฌุฑุจุฉ ุณูุณุฉ** ูููุณุชุฎุฏู ุงูุดุฑุนู
3. **ุชูุงูู ูุงูู** ูุน ุณูุงุณุงุช App Store
4. **ูุง ูุคุซุฑ ุนูู ุงูุฃุฏุงุก**

### ๐ฏ ุงูุญุงูุงุช ุงูุชู ุชูุญูู:
- โ ุชุณุฌูู ุงูุดุงุดุฉ ุนุจุฑ Control Center
- โ Screenshot ุนุจุฑ ุงูุฃุฒุฑุงุฑ ุงูููุฒูุงุฆูุฉ
- โ Screen Mirroring ูู Apple TV/Mac
- โ AirPlay ููุดุงุดุงุช ุงูุฎุงุฑุฌูุฉ
- โ ูุนุงููุฉ App Switcher
- โ QuickTime Recording ูู Mac

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ููู ูุชุทุจูู **ูุธุงู ุญูุงูุฉ ุงุญุชุฑุงูู ูุชุนุฏุฏ ุงูุทุจูุงุช** ูู iOS ูููุฑ:
- ๐ก๏ธ ุญูุงูุฉ ุชููุงุฆูุฉ ูู ุงูุชุณุฌูู ูุงููุฑุขุฉ
- ๐ ุฅุฎูุงุก ูุนุงููุฉ App Switcher
- ๐ธ ุชุนุชูู ููุทุงุช ุงูุดุงุดุฉ
- โก ุฃุฏุงุก ููุชุงุฒ ุจุฏูู ุชุฃุซูุฑ
- ๐ฏ ุณูููุฉ ุงูุชุญูู ุนุจุฑ flags

ุงููุธุงู **ุฌุงูุฒ ููุฅูุชุงุฌ** ููุนูู ุชููุงุฆูุงู ุนูุฏ ุชุนุทูู ูุถุน ุงูุชุทููุฑ! โ

---

## ๐ ุงูุฏุนู

ููุฃุณุฆูุฉ ุฃู ุงููุดุงูู:
- ุชุญูู ูู Console logs: `iOS Privacy Guard:`
- ุชุฃูุฏ ูู ุชุดุบูู ุนูู ุฌูุงุฒ ุญูููู (ููุณ ูุญุงูู)
- ุฑุงุฌุน `AppConstants.underDevelopmentOverride`

**ุงูุชุงุฑูุฎ:** 2025-01-09  
**ุงูุฅุตุฏุงุฑ:** 1.0.0  
**ุงูุญุงูุฉ:** โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู
